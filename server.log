INFO:cache_manager:缓存管理器初始化完成，缓存目录: cache
INFO:cache_manager:成功获取文件锁: cache/cyb_stocks_cache.json
WARNING:cache_manager:缓存数据校验和不匹配: cache/cyb_stocks_cache.json，可能是数据清理导致，继续使用
INFO:cache_manager:成功获取文件锁: cache/zxb_stocks_cache.json
WARNING:cache_manager:缓存数据校验和不匹配: cache/zxb_stocks_cache.json，可能是数据清理导致，继续使用
INFO:cache_manager:成功获取文件锁: cache/kcb_stocks_cache.json
WARNING:cache_manager:缓存数据校验和不匹配: cache/kcb_stocks_cache.json，可能是数据清理导致，继续使用
INFO:cache_manager:成功获取文件锁: cache/bj_stocks_cache.json
WARNING:cache_manager:缓存数据校验和不匹配: cache/bj_stocks_cache.json，可能是数据清理导致，继续使用
Tushare库已成功导入
K线API模块已成功导入
独立资金流向处理器已成功导入
K线API蓝图已注册
Tushare Token已设置: 68a7f380e45182b216eb...
独立资金流向处理器已初始化
AkShare库已成功导入
正在执行启动时数据完整性检查...
============================================================
开始数据完整性检查...
[实时数据任务] 调度器启动时间: 2025-08-07 16:13:01
实时数据定时任务已启动：交易时间每10秒获取一次实时数据
定时任务已设置：工作日下午5点自动同步所有A股数据
定时任务已设置：工作日下午5:30自动更新九转序列数据
定时任务已设置：工作日晚上7点自动更新资金流向数据
定时任务已设置：每天晚上6点自动筛选符合条件的股票
定时任务已设置：工作日下午3:05自动缓存分时图数据
定时任务已设置：交易时间每5分钟实时更新分时图数据
定时任务已设置：每小时监控数据新鲜度
定时任务已设置：每天早上9点检查数据完整性
实时数据获取任务已启动：交易时间每10秒获取一次实时数据
定时调度器已启动
服务器启动配置: host=0.0.0.0, port=8080, debug=False
Tushare API频率限制器已启用: 每分钟最多199次请求
可通过 /api/rate_limiter/status 查看API使用状态
✅ 创业板: 数据正常 (最后更新: 20250807)
❌ 沪A股: 无缓存数据
正在结束占用端口8080的进程 PID: 82733
✅ 深A: 数据正常 (最后更新: 20250806)
已强制结束占用端口8080的所有进程
端口8080已清理，准备启动服务器
✅ 科创板: 数据正常 (最后更新: 20250806)
✅ 北交所: 数据正常 (最后更新: 20250806)

发现数据问题，启动自动补偿...
正在补偿 沪A股 数据...
数据完整性检查完成
============================================================
 * Serving Flask app 'app'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.8.32:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:20] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:20] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:20] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:21] "GET / HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:22] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:22] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:22] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:22] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:22] "GET /api/indices/realtime HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:42] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:52] "GET /stock/300608 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:52] "GET /api/watchlist/check?ts_code=300608.SZ HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:53] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:kline_api:获取技术指标: symbol=300608, days=100, indicators=['macd', 'kdj', 'rsi']
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:54] "GET /api/market/status HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300608.SZ
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:56] "GET /api/stock/300608/daily_basic HTTP/1.1" 200 -
INFO:tushare_data_fetcher:成功获取 200 条数据，日期范围: 20241016 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300608.SZ', 'trade_date': '20250807', 'open': 14.01, 'high': 15.8, 'low': 13.96, 'close': 15.18, 'pre_close': 14.26, 'change': 0.92, 'pct_chg': 6.4516, 'vol': 702926.91, 'amount': 1044736.058}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:57] "GET /api/stock/300608/daily_history?days=200 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:13:57] "GET /api/kline/indicators/300608?indicators=macd,kdj,rsi&limit=200 HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300608.SZ
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300608.SZ', 'trade_date': '20250807', 'open': 14.01, 'high': 15.8, 'low': 13.96, 'close': 15.18, 'pre_close': 14.26, 'change': 0.92, 'pct_chg': 6.4516, 'vol': 702926.91, 'amount': 1044736.058}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:03] "GET /api/stock/300608/realtime HTTP/1.1" 200 -
INFO:moneyflow_handler:获取300608.SZ的资金流向数据
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:03] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:kline_api:获取技术指标: symbol=300762.SZ, days=100, indicators=['macd', 'kdj', 'rsi']
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300762.SZ
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300762.SZ
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300762.SZ', 'trade_date': '20250807', 'open': 25.24, 'high': 27.17, 'low': 24.91, 'close': 26.41, 'pre_close': 25.24, 'change': 1.17, 'pct_chg': 4.6355, 'vol': 679430.58, 'amount': 1769524.111}
INFO:moneyflow_handler:通过交易日历和数据验证获取到最新交易日: 20250806
INFO:tushare_data_fetcher:成功获取 200 条数据，日期范围: 20241016 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300762.SZ', 'trade_date': '20250807', 'open': 25.24, 'high': 27.17, 'low': 24.91, 'close': 26.41, 'pre_close': 25.24, 'change': 1.17, 'pct_chg': 4.6355, 'vol': 679430.58, 'amount': 1769524.111}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:10] "GET /api/stock/300762.SZ/daily_history?days=200 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:10] "GET /api/kline/indicators/300762.SZ?indicators=macd,kdj,rsi&limit=200 HTTP/1.1" 200 -
INFO:moneyflow_handler:成功获取300608.SZ的1条资金流向数据
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:11] "GET /api/stock/300608/moneyflow_v2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:11] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:12] "GET /api/market/status HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300608.SZ
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:13] "GET /api/stock/300762.SZ/realtime HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:14] "GET /stock/300474 HTTP/1.1" 200 -
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300608.SZ', 'trade_date': '20250807', 'open': 14.01, 'high': 15.8, 'low': 13.96, 'close': 15.18, 'pre_close': 14.26, 'change': 0.92, 'pct_chg': 6.4516, 'vol': 702926.91, 'amount': 1044736.058}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:15] "GET /api/watchlist/check?ts_code=300474.SZ HTTP/1.1" 200 -
INFO:kline_api:获取技术指标: symbol=300474, days=100, indicators=['macd', 'kdj', 'rsi']
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:17] "GET /api/market/status HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300474.SZ
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:18] "GET /api/stock/300608/realtime HTTP/1.1" 200 -
INFO:cache_manager:成功获取文件锁: cache/intraday/300608_20250807_intraday.json
INFO:cache_manager:成功加载分时图缓存: 300608, 数据量: 49
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:18] "GET /api/stock/300608/intraday?period=1&adjust=qfq HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:18] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
[所有指数] 非交易时间 16:13:20，返回最后缓存的指数数据
从缓存获取所有指数数据，共564条
[指数数据] 非交易时间 16:13:22，获取今日收盘数据...
[所有指数] 非交易时间 16:13:22，返回最后缓存的指数数据
从缓存获取所有指数数据，共564条
从缓存获取今日收盘数据
[每日指标] 最后交易日: 20250725, 返回前一交易日: 20250724
[每日指标] 获取300608.SZ在20250724的每日指标数据...
[历史日线] 获取300608.SZ的历史日线数据，天数: 200
[每日指标] 成功获取300608.SZ(思特奇)在20250724的每日指标数据，行业: 软件服务
[实时数据] 当前时间: 2025-08-07 16:13:56, 交易时间: False
[实时数据] 非交易时间，获取300608.SZ的最近交易日收盘数据...
[收盘数据] 获取300608.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
[EMA15] 有效收盘价数据数量: 200/200
[EMA15] 计算完成，有效EMA15数据数量: 200/200
[EMA15] 精度修复后，有效EMA15数据数量: 200/200
[EMA15] EMA15值范围: 10.2385 - 13.9172
[历史日线] 成功获取300608.SZ(思特奇)的200条历史日线数据
Tushare库已成功导入
K线API模块已成功导入
独立资金流向处理器已成功导入
K线API蓝图已注册
Tushare Token已设置: 68a7f380e45182b216eb...
独立资金流向处理器已初始化
AkShare库已成功导入
获取到1000条日线数据，股票代码: 300608.SZ，最新收盘价: 15.18
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 7.5197 - 20.2087
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 7.5197 - 20.2087
缓存中无当天净流入数据，正在通过API获取300608.SZ的资金流向数据...
成功从moneyflow获取300608.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=15.18, 今开=14.01, 涨跌幅=8.35%
资金流向原始数据: {'ts_code': '300608.SZ', 'trade_date': '20250806', 'buy_sm_vol': 186210, 'buy_sm_amount': 26085.28, 'sell_sm_vol': 203821, 'sell_sm_amount': 28678.16, 'buy_md_vol': 220770, 'buy_md_amount': 30993.91, 'sell_md_vol': 181576, 'sell_md_amount': 25511.24, 'buy_lg_vol': 161624, 'buy_lg_amount': 22685.37, 'sell_lg_vol': 151043, 'sell_lg_amount': 21181.81, 'buy_elg_vol': 60277, 'buy_elg_amount': 8420.61, 'sell_elg_vol': 92441, 'sell_elg_amount': 12813.96, 'net_mf_vol': -46169, 'net_mf_amount': -6365.91}
moneyflow接口 - net_mf_amount原始值: -6365.91万元
设置net_mf_amount为: -6.37千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=15.18, 今开=14.01, 涨跌幅=8.35%
[收盘数据] 成功获取300608.SZ的收盘数据
[实时交易数据] 从缓存文件读取实时交易数据...
[资金流向V2] 获取300608的资金流向数据
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[实时数据] 当前时间: 2025-08-07 16:14:05, 交易时间: False
[实时数据] 非交易时间，获取300762.SZ的最近交易日收盘数据...
[收盘数据] 获取300762.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
[历史日线] 获取300762.SZ的历史日线数据，天数: 200
获取到1000条日线数据，股票代码: 300762.SZ，最新收盘价: 26.41
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 10.1895 - 32.7412
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 10.1895 - 32.7412
缓存中无当天净流入数据，正在通过API获取300762.SZ的资金流向数据...
[EMA15] 有效收盘价数据数量: 200/200
[EMA15] 计算完成，有效EMA15数据数量: 200/200
[EMA15] 精度修复后，有效EMA15数据数量: 200/200
[EMA15] EMA15值范围: 18.1800 - 26.0629
[历史日线] 成功获取300762.SZ(上海瀚讯)的200条历史日线数据
[资金流向V2] 成功获取300608的资金流向数据
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[实时数据] 当前时间: 2025-08-07 16:14:11, 交易时间: False
[实时数据] 非交易时间，获取300608.SZ的最近交易日收盘数据...
[收盘数据] 获取300608.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
成功从moneyflow获取300762.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=26.41, 今开=25.24, 涨跌幅=4.64%
资金流向原始数据: {'ts_code': '300762.SZ', 'trade_date': '20250806', 'buy_sm_vol': 81679, 'buy_sm_amount': 20551.59, 'sell_sm_vol': 79451, 'sell_sm_amount': 20025.41, 'buy_md_vol': 139011, 'buy_md_amount': 34992.6, 'sell_md_vol': 134117, 'sell_md_amount': 33779.21, 'buy_lg_vol': 113150, 'buy_lg_amount': 28493.57, 'sell_lg_vol': 137431, 'sell_lg_amount': 34590.9, 'buy_elg_vol': 65619, 'buy_elg_amount': 16556.27, 'sell_elg_vol': 48459, 'sell_elg_amount': 12198.5, 'net_mf_vol': 11676, 'net_mf_amount': 2995.98}
moneyflow接口 - net_mf_amount原始值: 2995.98万元
设置net_mf_amount为: 3.0千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=26.41, 今开=25.24, 涨跌幅=4.64%
[收盘数据] 成功获取300762.SZ的收盘数据
获取到1000条日线数据，股票代码: 300608.SZ，最新收盘价: 15.18
[每日指标] 最后交易日: 20250725, 返回前一交易日: 20250724
[每日指标] 获取300474.SZ在20250724的每日指标数据...
[历史日线] 获取300474.SZ的历史日线数据，天数: 200
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 7.5197 - 20.2087
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 7.5197 - 20.2087
缓存中无当天净流入数据，正在通过API获取300608.SZ的资金流向数据...
成功从moneyflow获取300608.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=15.18, 今开=14.01, 涨跌幅=8.35%
资金流向原始数据: {'ts_code': '300608.SZ', 'trade_date': '20250806', 'buy_sm_vol': 186210, 'buy_sm_amount': 26085.28, 'sell_sm_vol': 203821, 'sell_sm_amount': 28678.16, 'buy_md_vol': 220770, 'buy_md_amount': 30993.91, 'sell_md_vol': 181576, 'sell_md_amount': 25511.24, 'buy_lg_vol': 161624, 'buy_lg_amount': 22685.37, 'sell_lg_vol': 151043, 'sell_lg_amount': 21181.81, 'buy_elg_vol': 60277, 'buy_elg_amount': 8420.61, 'sell_elg_vol': 92441, 'sell_elg_amount': 12813.96, 'net_mf_vol': -46169, 'net_mf_amount': -6365.91}
moneyflow接口 - net_mf_amount原始值: -6365.91万元
设置net_mf_amount为: -6.37千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=15.18, 今开=14.01, 涨跌幅=8.35%
[收盘数据] 成功获取300608.SZ的收盘数据
[分时数据] 开始获取股票 300608 的分时数据...
[分时数据] 尝试从缓存读取数据...
[分时数据] 成功从缓存加载 49 条分时数据
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[历史日线] 获取300608.SZ的历史日线数据，天数: 200
[神奇九转] 获取300608.SZ的神奇九转数据，频率: daily，天数: 200
[每日指标] 成功获取300474.SZ(景嘉微)在20250724的每日指标数据，行业: 元器件INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:19] "GET /api/stock/300474/daily_basic HTTP/1.1" 200 -
INFO:tushare_data_fetcher:成功获取 200 条数据，日期范围: 20241016 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300474.SZ', 'trade_date': '20250807', 'open': 84.0, 'high': 87.44, 'low': 83.02, 'close': 84.12, 'pre_close': 83.97, 'change': 0.15, 'pct_chg': 0.1786, 'vol': 275588.72, 'amount': 2345494.165}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:19] "GET /api/stock/300474/daily_history?days=200 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:19] "GET /api/kline/indicators/300474?indicators=macd,kdj,rsi&limit=200 HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300608.SZ
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300474.SZ
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:22] "GET /api/stock/300608/nine_turn?days=200&freq=daily HTTP/1.1" 200 -
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300474.SZ', 'trade_date': '20250807', 'open': 84.0, 'high': 87.44, 'low': 83.02, 'close': 84.12, 'pre_close': 83.97, 'change': 0.15, 'pct_chg': 0.1786, 'vol': 275588.72, 'amount': 2345494.165}
INFO:tushare_data_fetcher:成功获取 200 条数据，日期范围: 20241016 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300608.SZ', 'trade_date': '20250807', 'open': 14.01, 'high': 15.8, 'low': 13.96, 'close': 15.18, 'pre_close': 14.26, 'change': 0.92, 'pct_chg': 6.4516, 'vol': 702926.91, 'amount': 1044736.058}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:23] "GET /api/stock/300608/daily_history?days=200 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:23] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:27] "GET /api/stock/300474/realtime HTTP/1.1" 200 -
INFO:moneyflow_handler:获取300474.SZ的资金流向数据
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:27] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:30] "GET /api/market/status HTTP/1.1" 200 -
INFO:moneyflow_handler:通过交易日历和数据验证获取到最新交易日: 20250806
INFO:moneyflow_handler:成功获取300474.SZ的1条资金流向数据
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:33] "GET /api/stock/300474/moneyflow_v2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:33] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300474.SZ
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300474.SZ', 'trade_date': '20250807', 'open': 84.0, 'high': 87.44, 'low': 83.02, 'close': 84.12, 'pre_close': 83.97, 'change': 0.15, 'pct_chg': 0.1786, 'vol': 275588.72, 'amount': 2345494.165}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:43] "GET /api/stock/300474/realtime HTTP/1.1" 200 -
INFO:cache_manager:成功获取文件锁: cache/intraday/300474_20250807_intraday.json
INFO:cache_manager:成功加载分时图缓存: 300474, 数据量: 4
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:43] "GET /api/stock/300474/intraday?period=1&adjust=qfq HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:43] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300474.SZ
INFO:tushare_data_fetcher:成功获取 200 条数据，日期范围: 20241016 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300474.SZ', 'trade_date': '20250807', 'open': 84.0, 'high': 87.44, 'low': 83.02, 'close': 84.12, 'pre_close': 83.97, 'change': 0.15, 'pct_chg': 0.1786, 'vol': 275588.72, 'amount': 2345494.165}
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:46] "GET /api/stock/300474/daily_history?days=200 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:47] "GET /api/stock/300474/nine_turn?days=200&freq=daily HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:14:53] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:04] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:06] "GET /api/market/status HTTP/1.1" 200 -
INFO:cache_manager:成功获取文件锁: cache/intraday/300474_20250807_intraday.json
INFO:cache_manager:成功加载分时图缓存: 300474, 数据量: 4
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:15] "GET /api/stock/300474/intraday?period=1&adjust=qfq HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:15] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:19] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:tushare_data_fetcher:Tushare API初始化完成
INFO:tushare_data_fetcher:获取股票数据: 300474.SZ
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:23] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:23] "GET /api/indices/all HTTP/1.1" 200 -
INFO:tushare_data_fetcher:成功获取 1000 条数据，日期范围: 20210625 到 20250807
INFO:tushare_data_fetcher:数据样例:
INFO:tushare_data_fetcher:最新数据: {'ts_code': '300474.SZ', 'trade_date': '20250807', 'open': 84.0, 'high': 87.44, 'low': 83.02, 'close': 84.12, 'pre_close': 83.97, 'change': 0.15, 'pct_chg': 0.1786, 'vol': 275588.72, 'amount': 2345494.165}

[实时数据] 当前时间: 2025-08-07 16:14:19, 交易时间: False
[实时数据] 非交易时间，获取300474.SZ的最近交易日收盘数据...
[收盘数据] 获取300474.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
[EMA15] 有效收盘价数据数量: 200/200
[EMA15] 计算完成，有效EMA15数据数量: 200/200
[EMA15] 精度修复后，有效EMA15数据数量: 200/200
[EMA15] EMA15值范围: 67.3682 - 99.4275
[历史日线] 成功获取300474.SZ(景嘉微)的200条历史日线数据
[神奇九转] 成功计算300608.SZ(思特奇)的153条神奇九转数据，买入信号: 58个(完整序列2个)，卖出信号: 57个(完整序列1个)
获取到1000条日线数据，股票代码: 300474.SZ，最新收盘价: 84.12
[EMA15] 有效收盘价数据数量: 200/200
[EMA15] 计算完成，有效EMA15数据数量: 200/200
[EMA15] 精度修复后，有效EMA15数据数量: 200/200
[EMA15] EMA15值范围: 10.2385 - 13.9172
[历史日线] 成功获取300608.SZ(思特奇)的200条历史日线数据
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
缓存中无当天净流入数据，正在通过API获取300474.SZ的资金流向数据...
成功从moneyflow获取300474.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=84.12, 今开=84.00, 涨跌幅=0.14%
资金流向原始数据: {'ts_code': '300474.SZ', 'trade_date': '20250806', 'buy_sm_vol': 42257, 'buy_sm_amount': 35320.07, 'sell_sm_vol': 31699, 'sell_sm_amount': 26543.05, 'buy_md_vol': 76266, 'buy_md_amount': 63736.49, 'sell_md_vol': 67187, 'sell_md_amount': 56235.51, 'buy_lg_vol': 59536, 'buy_lg_amount': 49782.18, 'sell_lg_vol': 68293, 'sell_lg_amount': 57064.25, 'buy_elg_vol': 37251, 'buy_elg_amount': 31150.37, 'sell_elg_vol': 48130, 'sell_elg_amount': 40146.3, 'net_mf_vol': -10012, 'net_mf_amount': -8306.21}
moneyflow接口 - net_mf_amount原始值: -8306.21万元
设置net_mf_amount为: -8.31千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=84.12, 今开=84.00, 涨跌幅=0.14%
[收盘数据] 成功获取300474.SZ的收盘数据
[实时交易数据] 从缓存文件读取实时交易数据...
[资金流向V2] 获取300474的资金流向数据
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[资金流向V2] 成功获取300474的资金流向数据
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[实时数据] 当前时间: 2025-08-07 16:14:33, 交易时间: False
[实时数据] 非交易时间，获取300474.SZ的最近交易日收盘数据...
[收盘数据] 获取300474.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
获取到1000条日线数据，股票代码: 300474.SZ，最新收盘价: 84.12
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
缓存中无当天净流入数据，正在通过API获取300474.SZ的资金流向数据...
成功从moneyflow获取300474.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=84.12, 今开=84.00, 涨跌幅=0.14%
资金流向原始数据: {'ts_code': '300474.SZ', 'trade_date': '20250806', 'buy_sm_vol': 42257, 'buy_sm_amount': 35320.07, 'sell_sm_vol': 31699, 'sell_sm_amount': 26543.05, 'buy_md_vol': 76266, 'buy_md_amount': 63736.49, 'sell_md_vol': 67187, 'sell_md_amount': 56235.51, 'buy_lg_vol': 59536, 'buy_lg_amount': 49782.18, 'sell_lg_vol': 68293, 'sell_lg_amount': 57064.25, 'buy_elg_vol': 37251, 'buy_elg_amount': 31150.37, 'sell_elg_vol': 48130, 'sell_elg_amount': 40146.3, 'net_mf_vol': -10012, 'net_mf_amount': -8306.21}
moneyflow接口 - net_mf_amount原始值: -8306.21万元
设置net_mf_amount为: -8.31千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=84.12, 今开=84.00, 涨跌幅=0.14%
[收盘数据] 成功获取300474.SZ的收盘数据
[分时数据] 开始获取股票 300474 的分时数据...
[分时数据] 尝试从缓存读取数据...
[分时数据] 成功从缓存加载 4 条分时数据
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[历史日线] 获取300474.SZ的历史日线数据，天数: 200
[神奇九转] 获取300474.SZ的神奇九转数据，频率: daily，天数: 200
[EMA15] 有效收盘价数据数量: 200/200
[EMA15] 计算完成，有效EMA15数据数量: 200/200
[EMA15] 精度修复后，有效EMA15数据数量: 200/200
[EMA15] EMA15值范围: 67.3682 - 99.4275
[历史日线] 成功获取300474.SZ(景嘉微)的200条历史日线数据
[神奇九转] 成功计算300474.SZ(景嘉微)的153条神奇九转数据，买入信号: 75个(完整序列3个)，卖出信号: 50个(完整序列0个)
[分时数据] 开始获取股票 300474 的分时数据...
[分时数据] 尝试从缓存读取数据...
[分时数据] 成功从缓存加载 4 条分时数据
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 从缓存文件读取实时交易数据...
[实时交易数据缓存] 找到缓存数据，缓存时间: 2025-08-07 15:28:25
[实时交易数据] 成功从缓存读取16条数据，缓存时间: 2025-08-07 15:28:25
[实时数据] 当前时间: 2025-08-07 16:15:19, 交易时间: False
[实时数据] 非交易时间，获取300474.SZ的最近交易日收盘数据...
[收盘数据] 获取300474.SZ的最近交易日收盘数据...
[收盘数据] 最近交易日: 20250807
[所有指数] 非交易时间 16:15:23，返回最后缓存的指数数据
从缓存获取所有指数数据，共564条
获取到1000条日线数据，股票代码: 300474.SZ，最新收盘价: 84.12
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
[EMA15] 有效收盘价数据数量: 1000/1000
[EMA15] 计算完成，有效EMA15数据数量: 1000/1000
[EMA15] 精度修复后，有效EMA15数据数量: 1000/1000
[EMA15] EMA15值范围: 49.2045 - 181.7521
缓存中无当天净流入数据，正在通过API获取300474.SZ的资金流向数据...
成功从moneyflow获取300474.SZ的资金流向数据
[股票数据] 涨跌幅重新计算(基于今开): 收盘=84.12, 今开=84.00, 涨跌幅=0.14%
资金流向原始数据: {'ts_code': '300474.SZ', 'trade_date': '20250806', 'buy_sm_vol': 42257, 'buy_sm_amount': 35320.07, 'sell_sm_vol': 31699, 'sell_sm_amount': 26543.05, 'buy_md_vol': 76266, 'buy_md_amount': 63736.49, 'sell_md_vol': 67187, 'sell_md_amount': 56235.51, 'buy_lg_vol': 59536, 'buy_lg_amount': 49782.18, 'sell_lg_vol': 68293, 'sell_lg_amount': 57064.25, 'buy_elg_vol': 37251, 'buy_elg_amount': 31150.37, 'sell_elg_vol': 48130, 'sell_elg_amount': 40146.3, 'net_mf_vol': -10012, 'net_mf_amount': -8306.21}
moneyflow接口 - net_mf_amount原始值: -8306.21万元
设置net_mf_amount为: -8.31千万元
[收盘数据] 涨跌幅计算(基于今开): 当前收盘=84.12, 今开=84.00, 涨跌幅=0.14%INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:28] "GET /api/stock/300474/realtime HTTP/1.1" 200 -
INFO:cache_manager:成功获取文件锁: cache/intraday/300474_20250807_intraday.json
INFO:cache_manager:成功加载分时图缓存: 300474, 数据量: 4
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:31] "GET /api/stock/300474/intraday?period=1&adjust=qfq HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:31] "GET /api/stock/realtime_trading_data HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:44] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:15:53] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:16:23] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:16:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:17:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:17:23] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:17:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:18:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:18:56] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:18:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:19:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:19:23] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:19:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:20:44] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:20:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:21:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:21:23] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:21:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:22:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:23:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:23:23] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:23:23] "GET /api/indices/all HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:23:56] "GET /api/market/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:23:58] "GET /api/scheduler/status HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [07/Aug/2025 16:24:09] "GET /api/market/status HTTP/1.1" 200 -
